{% load static %}
<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Perfil - Django Course</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'core/style.css' %}">
    <link rel="stylesheet" href="{% static 'core/css/perfil.css' %}">
</head>

<body>
    <!-- prettier-ignore -->
    {% include 'core/navbar.html' %}

    <!-- Main Content -->
    <main class="main-content">
        <!-- Hero Section com anima√ß√µes e part√≠culas -->
        <section class="perfil-hero-section">
            <!-- Background Elements with Particles -->
            <div class="hero-background-elements">
                <div class="floating-shape shape-1"></div>
                <div class="floating-shape shape-2"></div>
                <div class="floating-shape shape-3"></div>
                <div class="floating-shape shape-4"></div>
                
                <!-- Floating Icons -->
                <div class="floating-icon" style="top: 15%; left: 80%; animation-delay: 1s;">
                    <i class="fas fa-user-graduate"></i>
                </div>
                <div class="floating-icon" style="top: 70%; left: 85%; animation-delay: 4s;">
                    <i class="fas fa-trophy"></i>
                </div>
                <div class="floating-icon" style="top: 40%; left: 75%; animation-delay: 7s;">
                    <i class="fas fa-star"></i>
                </div>
            </div>

            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-10">
                        <div class="hero-content text-center">
                            <div class="hero-badge">
                                <i class="fas fa-crown"></i>
                                <span>Membro Premium</span>
                            </div>
                            <h1 class="hero-title">
                                Bem-vindo, <span class="text-gradient">
                                    {% if user.first_name %}
                                        {{ user.first_name }}
                                        {% if user.last_name %} {{ user.last_name }}{% endif %}
                                    {% else %}
                                        {{ user.username }}
                                    {% endif %}
                                </span>!
                            </h1>
                            <p class="hero-subtitle">
                                Gerencie suas informa√ß√µes pessoais, acompanhe seu progresso e explore novos cursos na nossa plataforma
                            </p>
                            
                            <!-- Profile Stats -->
                            <div class="hero-stats">
                                <div class="stat-item">
                                    <span class="stat-number">15</span>
                                    <span class="stat-label">Cursos</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number">85%</span>
                                    <span class="stat-label">Progresso</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number">3</span>
                                    <span class="stat-label">Certificados</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Profile Content Section -->
        <section class="profile-section">
            <div class="container">
                <div class="row">
                    <!-- Profile Card -->
                    <div class="col-lg-4 mb-4">
                        <div class="profile-card">
                            <div class="profile-avatar">
                                {% if profile.avatar %}
                                    <img src="{{ profile.avatar.url }}" alt="Avatar" class="avatar-circle" 
                                         style="width: 120px; height: 120px; object-fit: cover; border-radius: 50%;">
                                {% else %}
                                    <div class="avatar-circle">
                                        <i class="fas fa-user"></i>
                                    </div>
                                {% endif %}
                                <div class="status-indicator"></div>
                            </div>
                            
                            <div class="profile-info">
                                <h3 class="profile-name">
                                    {% if user.first_name %}
                                        {{ user.first_name }}
                                        {% if user.last_name %} {{ user.last_name }}{% endif %}
                                    {% else %}
                                        {{ user.username }}
                                    {% endif %}
                                </h3>
                                <p class="profile-email">{{ user.email }}</p>
                                <div class="profile-badge">
                                    <i class="fas fa-crown me-1"></i>
                                    Membro Premium
                                </div>
                            </div>
                            
                            <div class="profile-actions">
                                <button class="btn btn-warning mb-2" data-bs-toggle="modal" data-bs-target="#editProfileModal">
                                    <i class="fas fa-edit me-2"></i>
                                    Editar Perfil
                                </button>
                                <!-- Avatar Upload Form -->
                                <div class="mt-3">
                                    <form method="post" enctype="multipart/form-data" class="avatar-upload-form" 
                                          style="background: rgba(255, 193, 7, 0.1); border: 2px solid #ffc107; border-radius: 12px; padding: 20px;">
                                        {% csrf_token %}
                                        <input type="hidden" name="avatar_upload" value="1">
                                        
                                        <div class="mb-3">
                                            <label for="avatar_input" class="form-label text-light fw-bold">
                                                <i class="fas fa-camera me-2" style="color: #ffc107;"></i>
                                                Alterar Foto do Perfil
                                            </label>
                                            <input type="file" 
                                                   class="form-control" 
                                                   id="avatar_input" 
                                                   name="avatar" 
                                                   accept="image/*" 
                                                   required
                                                   style="border: 1px solid #ffc107; background: rgba(255, 255, 255, 0.1);">
                                            <div class="form-text text-muted mt-2">
                                                <small><i class="fas fa-info-circle me-1"></i>Formatos aceitos: JPG, PNG, GIF. Tamanho m√°ximo: 5MB.</small>
                                            </div>
                                        </div>
                                        
                                        <button type="submit" class="btn btn-warning fw-bold" 
                                                style="box-shadow: 0 4px 8px rgba(255, 193, 7, 0.3);">
                                            <i class="fas fa-upload me-2"></i>
                                            Atualizar Foto
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Profile Content -->
                    <div class="col-lg-8">
                        <div class="profile-content">
                            <!-- Profile Tabs -->
                            <ul class="nav nav-tabs profile-tabs" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#overview" type="button" role="tab">
                                        <i class="fas fa-chart-line me-2"></i>
                                        Vis√£o Geral
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#courses" type="button" role="tab">
                                        <i class="fas fa-book me-2"></i>
                                        Meus Cursos
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#certificates" type="button" role="tab">
                                        <i class="fas fa-certificate me-2"></i>
                                        Certificados
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#settings" type="button" role="tab">
                                        <i class="fas fa-cog me-2"></i>
                                        Configura√ß√µes
                                    </button>
                                </li>
                            </ul>

                            <!-- Tab Content -->
                            <div class="tab-content profile-tab-content">
                                <!-- Overview Tab -->
                                <div class="tab-pane fade show active" id="overview" role="tabpanel">
                                    <div class="overview-content">
                                        <div class="row mb-4">
                                            <div class="col-md-4 mb-3">
                                                <div class="overview-card">
                                                    <div class="card-icon">
                                                        <i class="fas fa-graduation-cap"></i>
                                                    </div>
                                                    <h4>12</h4>
                                                    <p>Cursos Conclu√≠dos</p>
                                                    <div class="progress-bar">
                                                        <div class="progress-fill" style="width: 80%"></div>
                                                    </div>
                                                    <small>80% do total</small>
                                                </div>
                                            </div>
                                            <div class="col-md-4 mb-3">
                                                <div class="overview-card">
                                                    <div class="card-icon">
                                                        <i class="fas fa-clock"></i>
                                                    </div>
                                                    <h4>145h</h4>
                                                    <p>Tempo de Estudo</p>
                                                    <div class="progress-bar">
                                                        <div class="progress-fill" style="width: 65%"></div>
                                                    </div>
                                                    <small>Este m√™s: 23h</small>
                                                </div>
                                            </div>
                                            <div class="col-md-4 mb-3">
                                                <div class="overview-card">
                                                    <div class="card-icon">
                                                        <i class="fas fa-trophy"></i>
                                                    </div>
                                                    <h4>7</h4>
                                                    <p>Conquistas</p>
                                                    <div class="achievements">
                                                        <span class="achievement-badge">üèÜ</span>
                                                        <span class="achievement-badge">üéñÔ∏è</span>
                                                        <span class="achievement-badge">‚≠ê</span>
                                                        <span class="achievement-badge">ü•á</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Recent Activity -->
                                        <div class="recent-activity">
                                            <h3 class="section-title">Atividade Recente</h3>
                                            <div class="activity-list">
                                                <div class="activity-item">
                                                    <div class="activity-icon">
                                                        <i class="fas fa-play"></i>
                                                    </div>
                                                    <div class="activity-content">
                                                        <h6>Completou: Django Avan√ßado</h6>
                                                        <p>Finalizado o m√≥dulo de APIs REST</p>
                                                        <small>2 horas atr√°s</small>
                                                    </div>
                                                </div>
                                                <div class="activity-item">
                                                    <div class="activity-icon">
                                                        <i class="fas fa-certificate"></i>
                                                    </div>
                                                    <div class="activity-content">
                                                        <h6>Certificado Obtido</h6>
                                                        <p>Python para Iniciantes - Certificado de conclus√£o</p>
                                                        <small>1 dia atr√°s</small>
                                                    </div>
                                                </div>
                                                <div class="activity-item">
                                                    <div class="activity-icon">
                                                        <i class="fas fa-star"></i>
                                                    </div>
                                                    <div class="activity-content">
                                                        <h6>Nova Conquista</h6>
                                                        <p>Desbloqueou: "Estudioso Dedicado"</p>
                                                        <small>3 dias atr√°s</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Courses Tab -->
                                <div class="tab-pane fade" id="courses" role="tabpanel">
                                    <div class="courses-content">
                                        <div class="courses-filter">
                                            <h3 class="section-title">Meus Cursos</h3>
                                            <div class="filter-buttons">
                                                <button class="btn btn-outline-warning btn-sm active">Todos</button>
                                                <button class="btn btn-outline-warning btn-sm">Em Progresso</button>
                                                <button class="btn btn-outline-warning btn-sm">Conclu√≠dos</button>
                                            </div>
                                        </div>

                                        <div class="courses-grid">
                                            <div class="course-card">
                                                <div class="course-progress">
                                                    <div class="progress-circle">85%</div>
                                                </div>
                                                <div class="course-content">
                                                    <h6>Django para Iniciantes</h6>
                                                    <p>Aprenda os fundamentos do Django</p>
                                                    <div class="course-meta">
                                                        <span><i class="fas fa-clock me-1"></i>12h</span>
                                                        <span><i class="fas fa-video me-1"></i>24 aulas</span>
                                                    </div>
                                                    <button class="btn btn-warning btn-sm">Continuar</button>
                                                </div>
                                            </div>

                                            <div class="course-card">
                                                <div class="course-progress">
                                                    <div class="progress-circle completed">
                                                        <i class="fas fa-check"></i>
                                                    </div>
                                                </div>
                                                <div class="course-content">
                                                    <h6>Python B√°sico</h6>
                                                    <p>Fundamentos da linguagem Python</p>
                                                    <div class="course-meta">
                                                        <span><i class="fas fa-clock me-1"></i>8h</span>
                                                        <span><i class="fas fa-video me-1"></i>16 aulas</span>
                                                    </div>
                                                    <button class="btn btn-success btn-sm">Conclu√≠do</button>
                                                </div>
                                            </div>

                                            <div class="course-card">
                                                <div class="course-progress">
                                                    <div class="progress-circle">45%</div>
                                                </div>
                                                <div class="course-content">
                                                    <h6>APIs REST com Django</h6>
                                                    <p>Criando APIs robustas com Django REST Framework</p>
                                                    <div class="course-meta">
                                                        <span><i class="fas fa-clock me-1"></i>16h</span>
                                                        <span><i class="fas fa-video me-1"></i>32 aulas</span>
                                                    </div>
                                                    <button class="btn btn-warning btn-sm">Continuar</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Certificates Tab -->
                                <div class="tab-pane fade" id="certificates" role="tabpanel">
                                    <div class="certificates-content">
                                        <h3 class="section-title">Meus Certificados</h3>
                                        
                                        <div class="certificates-grid">
                                            <div class="certificate-card">
                                                <div class="certificate-icon">
                                                    <i class="fas fa-award"></i>
                                                </div>
                                                <div class="certificate-content">
                                                    <h6>Python para Iniciantes</h6>
                                                    <p>Certificado de conclus√£o do curso completo</p>
                                                    <small class="text-muted">Emitido em: 15/12/2024</small>
                                                </div>
                                                <div class="certificate-actions">
                                                    <button class="btn btn-warning btn-sm">
                                                        <i class="fas fa-download me-1"></i>
                                                        Download
                                                    </button>
                                                    <button class="btn btn-outline-warning btn-sm">
                                                        <i class="fas fa-share me-1"></i>
                                                        Compartilhar
                                                    </button>
                                                </div>
                                            </div>

                                            <div class="certificate-card">
                                                <div class="certificate-icon">
                                                    <i class="fas fa-medal"></i>
                                                </div>
                                                <div class="certificate-content">
                                                    <h6>Django Fundamentos</h6>
                                                    <p>Certificado de conclus√£o do curso b√°sico</p>
                                                    <small class="text-muted">Emitido em: 28/11/2024</small>
                                                </div>
                                                <div class="certificate-actions">
                                                    <button class="btn btn-warning btn-sm">
                                                        <i class="fas fa-download me-1"></i>
                                                        Download
                                                    </button>
                                                    <button class="btn btn-outline-warning btn-sm">
                                                        <i class="fas fa-share me-1"></i>
                                                        Compartilhar
                                                    </button>
                                                </div>
                                            </div>

                                            <div class="certificate-card">
                                                <div class="certificate-icon">
                                                    <i class="fas fa-trophy"></i>
                                                </div>
                                                <div class="certificate-content">
                                                    <h6>Web Development</h6>
                                                    <p>Certificado avan√ßado em desenvolvimento web</p>
                                                    <small class="text-muted">Emitido em: 10/10/2024</small>
                                                </div>
                                                <div class="certificate-actions">
                                                    <button class="btn btn-warning btn-sm">
                                                        <i class="fas fa-download me-1"></i>
                                                        Download
                                                    </button>
                                                    <button class="btn btn-outline-warning btn-sm">
                                                        <i class="fas fa-share me-1"></i>
                                                        Compartilhar
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Settings Tab -->
                                <div class="tab-pane fade" id="settings" role="tabpanel">
                                    <div class="settings-content">
                                        <h3 class="section-title">Configura√ß√µes</h3>
                                        
                                        <div class="settings-sections">
                                            <div class="settings-section">
                                                <h6><i class="fas fa-bell me-2"></i>Notifica√ß√µes</h6>
                                                <div class="setting-item">
                                                    <div class="setting-info">
                                                        <strong>Notifica√ß√µes por Email</strong>
                                                        <p>Receba atualiza√ß√µes sobre novos cursos e conte√∫dos</p>
                                                    </div>
                                                    <div class="form-check form-switch">
                                                        <input class="form-check-input" type="checkbox" checked>
                                                    </div>
                                                </div>
                                                <div class="setting-item">
                                                    <div class="setting-info">
                                                        <strong>Lembrete de Estudos</strong>
                                                        <p>Receba lembretes para continuar seus cursos</p>
                                                    </div>
                                                    <div class="form-check form-switch">
                                                        <input class="form-check-input" type="checkbox" checked>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="settings-section">
                                                <h6><i class="fas fa-shield-alt me-2"></i>Privacidade</h6>
                                                <div class="setting-item">
                                                    <div class="setting-info">
                                                        <strong>Perfil P√∫blico</strong>
                                                        <p>Permitir que outros usu√°rios vejam seu perfil</p>
                                                    </div>
                                                    <div class="form-check form-switch">
                                                        <input class="form-check-input" type="checkbox">
                                                    </div>
                                                </div>
                                                <div class="setting-item">
                                                    <div class="setting-info">
                                                        <strong>Mostrar Progresso</strong>
                                                        <p>Exibir seu progresso nos cursos publicamente</p>
                                                    </div>
                                                    <div class="form-check form-switch">
                                                        <input class="form-check-input" type="checkbox">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="settings-section">
                                                <h6><i class="fas fa-key me-2"></i>Seguran√ßa</h6>
                                                <div class="setting-item">
                                                    <div class="setting-info">
                                                        <strong>Autentica√ß√£o de Dois Fatores</strong>
                                                        <p>Adicione uma camada extra de seguran√ßa</p>
                                                    </div>
                                                    <button class="btn btn-outline-warning btn-sm">Configurar</button>
                                                </div>
                                                <div class="setting-item">
                                                    <div class="setting-info">
                                                        <strong>Alterar Senha</strong>
                                                        <p>Mantenha sua conta segura com uma senha forte</p>
                                                    </div>
                                                    <button class="btn btn-outline-warning btn-sm">Alterar</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Edit Profile Modal -->
    <div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark">
                <div class="modal-header">
                    <h5 class="modal-title" id="editProfileModalLabel" style="color: #ffc107;">
                        <i class="fas fa-edit me-2"></i>
                        Editar Perfil
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form method="post">
                    {% csrf_token %}
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="input-group">
                                    <span class="input-group-text bg-dark text-warning border-warning">
                                        <i class="fas fa-user"></i>
                                    </span>
                                    {{ profile_form.first_name }}
                                    <label class="floating-label">Nome</label>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="input-group">
                                    <span class="input-group-text bg-dark text-warning border-warning">
                                        <i class="fas fa-user"></i>
                                    </span>
                                    {{ profile_form.last_name }}
                                    <label class="floating-label">Sobrenome</label>
                                </div>
                            </div>
                            <div class="col-12 mb-3">
                                <div class="input-group">
                                    <span class="input-group-text bg-dark text-warning border-warning">
                                        <i class="fas fa-envelope"></i>
                                    </span>
                                    {{ profile_form.email }}
                                    <label class="floating-label">Email</label>
                                </div>
                            </div>
                            <div class="col-12 mb-3">
                                <div class="input-group">
                                    <span class="input-group-text bg-dark text-warning border-warning">
                                        <i class="fas fa-comment"></i>
                                    </span>
                                    {{ profile_form.bio }}
                                    <label class="floating-label">Bio</label>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="input-group">
                                    <span class="input-group-text bg-dark text-warning border-warning">
                                        <i class="fas fa-phone"></i>
                                    </span>
                                    {{ profile_form.phone }}
                                    <label class="floating-label">Telefone</label>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="input-group">
                                    <span class="input-group-text bg-dark text-warning border-warning">
                                        <i class="fas fa-calendar"></i>
                                    </span>
                                    {{ profile_form.birth_date }}
                                    <label class="floating-label">Data de Nascimento</label>
                                </div>
                            </div>
                            <div class="col-12 mb-3">
                                <div class="input-group">
                                    <span class="input-group-text bg-dark text-warning border-warning">
                                        <i class="fas fa-map-marker-alt"></i>
                                    </span>
                                    {{ profile_form.location }}
                                    <label class="floating-label">Localiza√ß√£o</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="submit" name="profile_update" class="btn btn-warning">
                            <i class="fas fa-save me-2"></i>
                            Salvar Altera√ß√µes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JavaScript for Profile Page -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // ==========================================
            // PROFILE PAGE INTERACTIONS
            // ==========================================

            // Avatar Preview for main form
            const avatarInput = document.querySelector('input[name="avatar"]');
            if (avatarInput) {
                avatarInput.addEventListener('change', function (e) {
                    const file = e.target.files[0];
                    if (file) {
                        console.log('Avatar file selected:', file.name);
                        // Voc√™ pode adicionar preview aqui se quiser
                    }
                });
            }

            // Floating Labels Animation
            const inputs = document.querySelectorAll('.form-control');
            inputs.forEach(input => {
                const label = input.parentElement.querySelector('.floating-label');
                
                // Verificar se o label existe antes de usar
                if (!label) return;
                
                if (input.value) {
                    label.classList.add('active');
                }

                input.addEventListener('focus', () => {
                    if (label) label.classList.add('active');
                });

                input.addEventListener('blur', () => {
                    if (label && !input.value) {
                        label.classList.remove('active');
                    }
                });

                input.addEventListener('input', () => {
                    if (!label) return;
                    
                    if (input.value) {
                        label.classList.add('active');
                    } else {
                        label.classList.remove('active');
                    }
                });
            });

            // Tab Animation
            const tabLinks = document.querySelectorAll('.profile-tabs .nav-link');
            tabLinks.forEach(link => {
                link.addEventListener('click', function() {
                    // Remove active class from all
                    tabLinks.forEach(l => l.classList.remove('active'));
                    // Add active class to clicked
                    this.classList.add('active');
                });
            });

            // Progress Bars Animation
            const progressBars = document.querySelectorAll('.progress-fill');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const width = entry.target.style.width;
                        entry.target.style.width = '0%';
                        setTimeout(() => {
                            entry.target.style.width = width;
                        }, 100);
                    }
                });
            });

            progressBars.forEach(bar => {
                observer.observe(bar);
            });

            // Course Filter Buttons
            const filterButtons = document.querySelectorAll('.filter-buttons .btn');
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Here you would add filtering logic
                    console.log('Filter by:', this.textContent);
                });
            });

            // Settings Switches
            const switches = document.querySelectorAll('.form-check-input');
            switches.forEach(switchEl => {
                switchEl.addEventListener('change', function() {
                    console.log('Setting changed:', this.checked);
                    // Here you would save the setting via AJAX
                });
            });

            // Card Hover Effects
            const cards = document.querySelectorAll('.overview-card, .course-card, .certificate-card');
            cards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-5px)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });

            // Floating Shapes Animation Enhancement
            const shapes = document.querySelectorAll('.floating-shape');
            shapes.forEach((shape, index) => {
                shape.style.animationDelay = `${index * 2}s`;
                shape.style.animationDuration = `${15 + (index * 3)}s`;
            });

            // Smooth Scroll for Internal Links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth'
                        });
                    }
                });
            });

            // Toast Notifications (if needed)
            function showToast(message, type = 'success') {
                const toastContainer = document.createElement('div');
                toastContainer.className = `position-fixed top-0 end-0 p-3`;
                toastContainer.style.zIndex = '1055';
                
                const toast = document.createElement('div');
                toast.className = `toast align-items-center text-white bg-${type} border-0`;
                toast.setAttribute('role', 'alert');
                toast.innerHTML = `
                    <div class="d-flex">
                        <div class="toast-body">
                            <i class="fas fa-check-circle me-2"></i>${message}
                        </div>
                        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                    </div>
                `;
                
                toastContainer.appendChild(toast);
                document.body.appendChild(toastContainer);
                
                const bsToast = new bootstrap.Toast(toast);
                bsToast.show();
                
                setTimeout(() => {
                    toastContainer.remove();
                }, 5000);
            }

            // Example: Show toast on form submission
            const forms = document.querySelectorAll('form');
            forms.forEach(form => {
                form.addEventListener('submit', function(e) {
                    console.log('Form submitting:', this);
                    console.log('Form data:', new FormData(this));
                    
                    // Check if this is the avatar form
                    const isAvatarForm = this.querySelector('input[name="avatar"]');
                    if (isAvatarForm) {
                        console.log('Avatar form detected');
                        const fileInput = this.querySelector('input[name="avatar"]');
                        console.log('File input:', fileInput);
                        console.log('Selected files:', fileInput.files);
                    }
                    
                    // Don't prevent default - let Django handle it
                    // Just show a loading state
                    const submitBtn = this.querySelector('button[type="submit"]');
                    if (submitBtn) {
                        const originalText = submitBtn.innerHTML;
                        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Salvando...';
                        submitBtn.disabled = true;
                        
                        // Re-enable after a delay (Django will reload the page anyway)
                        setTimeout(() => {
                            submitBtn.innerHTML = originalText;
                            submitBtn.disabled = false;
                        }, 3000);
                    }
                });
            });
        });
    </script>
</body>

</html>